"use strict";function set_calendars(e,t){var a=$("#dtpc_property_id").val(),r=APP_URL+"/admin/ajax-calender/"+a,o=$('input[name="_token"]').val();$.ajax({url:r,data:{_token:o,month:e,year:t},type:"post",dataType:"json",success:function(e){$("#calender-dv").html(e.calendar)},error:function(e,t){}})}$(document).ready((function(){$("#dataTableBuilder").on("click",".edit_meta",(function(){var e=this.id,t=APP_URL+"/admin/edit_meta";$.ajax({type:"POST",url:t,data:{id:e,method:"get_meta"},dataType:"JSON",success:function(e){1==e.status_check&&($(".edit_id").val(e.id),$("#input_url").val(e.url),$("#input_title").val(e.title),$("#input_description").val(e.description),$("#input_keywords").val(e.keywords))},error:function(e,t){}})})),"sendmail"==$("#driver").val()&&($(".host").hide(),$(".port").hide(),$(".from_address").hide(),$(".from_name").hide(),$(".encryption").hide(),$(".username").hide(),$(".password").hide(),$(".email_status").hide(),$(".error_email_settings").hide()),$("#driver").on("change",(function(){var e=$("#driver").val(),t=$(".email_status_check").val();"sendmail"==e?($(".host").hide(),$(".port").hide(),$(".from_address").hide(),$(".from_name").hide(),$(".encryption").hide(),$(".username").hide(),$(".password").hide(),$(".email_status").hide(),$(".error_email_settings").hide()):"smtp"==e?($(".host").show(),$(".port").show(),$(".from_address").show(),$(".from_name").show(),$(".encryption").show(),$(".username").show(),$(".password").show(),1==t?($(".email_status").show(),$(".error_email_settings").hide()):($(".error_email_settings").show(),$(".email_status").hide())):($(".email_status").hide(),$(".error_email_settings").hide())})),$(".remove_logo_preview").on("click",(function(){var e=$("#hidden_company_logo").attr("data-rel"),t=$('input[name="_token"]').val();e&&$.ajax({url:"settings/delete_logo",type:"post",async:!1,data:{company_logo:e,_token:t},dataType:"json",success:function(e){e.success,alert(e.message),location.reload()}})})),$(".remove_favicon_preview").on("click",(function(){var e=$("#hidden_company_favicon").attr("data-rel"),t=$('input[name="_token"]').val();e&&$.ajax({url:"settings/delete_favicon",type:"post",async:!1,data:{company_favicon:e,_token:t},dataType:"json",success:function(e){e.success,alert(e.message),location.reload()}})})),$(document.body).on("click",".modal-admin",(function(){$("#add_modal").modal()})),$(document).on("click",".edit_bank",(function(e){e.preventDefault();$(this).attr("action");$.ajax({url:e.target.dataset.url,type:"get",async:!1,data:[],processData:!1,contentType:!1,dataType:"json",success:function(t,a,r){document.querySelector("#name").value=t.account_name,document.querySelector("#iban").value=t.iban,document.querySelector("#swift").value=t.swift_code,document.querySelector("#bank").value=t.bank_name,document.querySelector("#branch").value=t.branch_name,document.querySelector("#br_city").value=t.branch_city,document.querySelector("#route").value=t.routing_no,document.querySelector("#br_address").value=t.branch_address,document.querySelector("#description").innerHTML=t.description,document.querySelector("#logo").src=t.logo,document.querySelector("#country").value=t.country,document.querySelector("#status").value=t.status,document.querySelector("#edit_form").action=e.target.dataset.edit,$("#edit_modal").modal()},error:function(e,t,a){throw"Bank details not found"}})})),$(document).on("change",".pricing_checkbox",(function(){if(this.checked){var e=$(this).attr("data-rel");$("#"+e).show()}else{e=$(this).attr("data-rel");$("#"+e).hide(),$("#price-"+e).val(0)}})),$(document).on("click","#show_long_term",(function(){$("#js-set-long-term-prices").hide(),$("#long-term-div").show()})),$(".editor").wysihtml5(),$("#available").on("click",(function(){"box-header d-none"==$("#variable").attr("class")?$("#variable").removeClass("d-none"):$("#variable").addClass("d-none")})),$(document).on("change","#calendar_dropdown",(function(){var e=$(this).val(),t=(e=e.split("-"))[0];set_calendars(e[1],t)})),$("#update_meta").on("click",(function(){var e=$(".edit_id").val(),t=$("#input_url").val(),a=$("#input_title").val(),r=$("#input_description").val(),o=$("#input_keywords").val(),n=APP_URL+"/admin/edit_meta";$.ajax({type:"POST",url:n,data:{edit_id:e,url:t,title:a,description:r,keywords:o,method:"update_meta"},dataType:"JSON",success:function(e){1==e.status_check?($(".edit_id").val(e.id),$("#input_url").val(e.url),$("#input_title").val(e.title),$("#input_description").val(e.description),$("#input_keywords").val(e.keywords),$("#meta_message").css({display:"block","text-align":"center"}),$("#meta_message").html(e.message)):($("#meta_message").css({display:"none","text-align":"center"}),$(".input_url").html(e.url),$(".input_title").html(e.title),$(".input_description").html(e.description),$(".input_keywords").html(e.keywords))},error:function(e,t){}})}))})),$(document.body).on("click",".date-package-modal-admin",(function(){var e=$(this).hasClass("tile-previous");if($("#model-message").html(""),!e){var t=$(this).attr("id").split("-"),a=t[2],r=t[1],o=t[0],n=$(this).attr("data-price"),d=$(this).attr("data-minday"),i=$(this).attr("data-status"),s=a+"-"+r+"-"+o;$("#dtpc_start_admin").val(s),$("#dtpc_end_admin").val(s),$("#dtpc_price").val(n),$("#dtpc_minstay_admin").val(d),$("#dtpc_status").val(i).change(),$("#dtpc_start_admin").datepicker({format:"dd-mm-yyyy",onSelect:function(e){}}),$("#dtpc_end_admin").datepicker({format:"dd-mm-yyyy",onSelect:function(e){}}),$("#hotel_date_package_admin").modal()}})),$(document.body).on("click",".imporpt_calendar",(function(){$("#import_calendar_package").modal()})),$(document.body).on("change","#color",(function(){"custom"==$("#color").val()?$(".colorCustom").css("display","block"):$(".colorCustom").css("display","none")})),$(document.body).on("submit","#icalendar_form",(function(e){e.preventDefault(),$("#error-icalendar-url").html(""),$("#error-icalendar-name").html("");var t=$("#icalendar_url").val(),a=$("#icalendar_name").val(),r=$("#icalendar_property_id").val(),o=$("#color").val(),n=$("#customcolor").val();"custom"==o?""==n&&$("#error-dtpc-customcolor").html("This field is required."):n="none",""==t&&$("#error-icalendar-url").html("This field is required."),""==a&&$("#error-icalendar-name").html("This field is required."),""==o?$("#error-dtpc-color").html("This field is required."):$.ajax({type:"POST",url:APP_URL+"/admin/ajax-icalender-import/"+r,data:{url:t,name:a,property_id:r,color:o,customcolor:n},success:function(e){if(1!=e.status)return $("#error-icalendar-url").html(e.error.url),$("#error-icalendar-name").html(e.error.name),$("#error-dtpc-customcolor").html(e.error.customcolor),!1;$("#icalendar-model-message").html(e.success_message),$("#icalendar-model-message").show()},error:function(e,t){}})})),$(document.body).on("click","#export_icalendar",(function(){$("#calendar_export_package").modal()})),$(document.body).on("submit","#dtpc_form",(function(e){e.preventDefault(),$("#error-dtpc-start").html(""),$("#error-dtpc-end").html(""),$("#error-dtpc-price").html(""),$("#error-dtpc-minstay").html("");var t=$("#dtpc_start_admin").val(),a=$("#dtpc_end_admin").val(),r=$("#dtpc_price").val(),o=$("#dtpc_status").val(),n=$("#dtpc_minstay_admin").val(),d=$("#dtpc_property_id").val(),i=APP_URL+"/admin/ajax-calender-price/"+d,s=$('input[name="_token"]').val();""==t&&$("#error-dtpc-start").html("Start date not given."),""==a&&$("#error-dtpc-end").html("End date not given."),""==r&&$("#error-dtpc-price").html("Price not given."),""!=t&&""!=a&&""!=r&&""!=o&&$.ajax({type:"POST",url:i,data:{_token:s,start_date:t,end_date:a,price:r,min_stay:n,status:o},success:function(e){var t=$("#calendar_dropdown").val(),a=(t=t.split("-"))[0];set_calendars(t[1],a),$("#model-message").removeClass("alert-danger"),$("#model-message").addClass("alert-success"),$("#model-message").html("Data save successfully"),$("#hotel_date_package_admin").modal("hide")},error:function(e,t){if($("#error-dtpc-start_date, #error-dtpc-end_date, #error-dtpc-price, #error-dtpc-status, #error-dtpc-stay").html(""),console.log(e),[400,422].includes(e.status)&&e.responseJSON.errors){let t=e.responseJSON.errors;for(var a in t)$("#error-dtpc-"+a).html(t[a][0])}else{let t=e.responseJSON?.message||"An error occurred";$("#model-message").html(t).removeClass("d-none bg-success").addClass("bg-danger")}$("#price_btn").removeClass("disabled"),$("#price_spinner").addClass("d-none"),$("#price_next-text").text("Submit")}})})),$(document).on("click",".month-nav-next",(function(e){e.preventDefault();var t=$(this).attr("data-year");set_calendars($(this).attr("data-month"),t)})),$(document).on("click",".month-nav-previous",(function(e){e.preventDefault();var t=$(this).attr("data-year");set_calendars($(this).attr("data-month"),t)}));